<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="./images/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="./images/favicon.svg" />
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  <title>Saratha Vilas Heritage Walk</title>
  
  <style>
    body{
      padding: 0;   
      margin: 0;
      overflow: hidden;
    }
    #main_container{
        position: absolute;
        z-index: 100;
        background-color: black;
        width: 100vw;
        height: 100vh;
    }
    #start_vr{
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 1.5rem;
        padding: 10px 20px;
        cursor: pointer;
    }
  </style>

</head>
<body>

  <div id="main_container">
    <button id="start_vr">Click</button>
  </div>

  <a-scene vr-mode-ui="enabled: false" xr-mode-ui="enabled: false" cursor="rayOrigin: mouse" visible="false">
  
    <a-sky></a-sky>
    
    <!-- Camera -->
    <a-entity id="camera-rig" position="0 1.6 0" rotation="0 -90 0">
      <a-camera fov="90" look-controls wasd-controls-enabled="false"></a-camera>
      
       <!-- Right controller -->
        <a-entity 
            laser-controls="hand: right" 
            raycaster="objects: .controller-clickable" 
            cursor="fuse: false">
        </a-entity>

        <!-- Left controller -->
        <a-entity 
            laser-controls="hand: left" 
            raycaster="objects: .controller-clickable" 
            cursor="fuse: false">
        </a-entity>
    </a-entity>

    <!-- Top Arrow -->
    <a-entity rotation="-90 0 0" id="top_arrow" visible="false">
      <a-circle color="white" radius="0.9" material="opacity: 0.8; transparent: true" class="controller-clickable"></a-circle>
      <a-plane 
        src="./images/arrow_model2.png" 
        width="1" 
        height="1" 
        transparent="true" 
        position="0 0 0.01"
        material="shader: flat; opacity: 0.8; transparent: true">
      </a-plane>
    </a-entity>

    <!-- Bottom Arrow -->
    <a-entity rotation="-90 180 0"  id="bottom_arrow" visible="false">
      <a-circle color="white" radius="0.9" material="opacity: 0.8; transparent: true" class="controller-clickable"></a-circle>
      <a-plane 
        src="./images/arrow_model2.png" 
        width="1" 
        height="1" 
        transparent="true" 
        position="0 0 0.01"
        material="shader: flat; opacity: 0.8; transparent: true">
      </a-plane>
    </a-entity>

    <!-- Exit Arrow -->
    <a-entity rotation="0 -90 90"  id="exit_arrow" visible="false">
      <a-circle color="white" radius="0.9" material="opacity: 0.8; transparent: true" class="controller-clickable"></a-circle>
      <a-plane 
        src="./images/close.png" 
        width="0.8" 
        height="0.8" 
        transparent="true" 
        position="0 0 0.01"
        material="shader: flat; opacity: 0.8; transparent: true">
      </a-plane>
      <a-text value="Exit" color="black" width="4" rotation="0 0 -90" position="0 0.15 2"></a-text>
    </a-entity>

    <!-- 1 eye -->
    <a-entity id="eye1" visible="false">
      <a-circle color="black" radius="0.3" material="opacity: 0.7; transparent: true" class="controller-clickable"></a-circle>
      <a-plane 
        src="./images/eye.webp" 
        width="0.3" 
        height="0.3" 
        transparent="true" 
        position="0 0 0.01"
        material="shader: flat; opacity: 0.9; transparent: true">
      </a-plane>
    </a-entity>

    <!-- 2 eye -->
    <a-entity id="eye2" visible="false">
      <a-circle color="black" radius="0.3" material="opacity: 0.7; transparent: true" class="controller-clickable"></a-circle>
      <a-plane 
        src="./images/eye.webp" 
        width="0.3" 
        height="0.3" 
        transparent="true" 
        position="0 0 0.01"
        material="shader: flat; opacity: 1; transparent: true">
      </a-plane>
    </a-entity>




     <!-- 1 Hotspot -->
    <a-entity position="5 3 3" rotation="0 -90 0" id="hotspot1">
      <a-circle color="black" radius="0.2" material="opacity: 0.7; transparent: true" class="controller-clickable"></a-circle>
      <a-plane 
        src="./images/hotspot.webp" 
        width="0.2" 
        height="0.2" 
        transparent="true" 
        position="0 0 0.01"
        material="shader: flat; opacity: 0.9; transparent: true">
      </a-plane>
    </a-entity>


      <!-- Info Tab -->
    <a-entity id="info_tab" rotation="0 -90 0" position="5 3 0" visible="false">
    
      <a-plane width="6" height="4" color="black" material="shader: flat"></a-plane>

      <a-text id="info_obj_name" width="4" color="white" position="-1.09427 1.49721 0.1" value=""></a-text>    
      <a-text id="info_obj_othername" width="4" color="white" position="0 0.7 0.1" value=""></a-text>  
      <a-text id="info_obj_material" width="4" color="white" position="0 0.3 0.1" value=""></a-text>
      <a-text id="info_obj_description" width="4" color="white" position="0 -0.3 0.1" value=""></a-text>

      <a-plane src="" id="info_obj_picture" position="-1.45284 -0.36311 0.01" height="2.6" width="2.35"></a-plane>
      
      <a-plane id="close_button" width="1" height="0.4" position="1.32508 -1.39418 0.1" class="controller-clickable"></a-plane>
      <a-text id="close_button_text" color="black" value="Next" width="4" position="1.1 -1.39418 0.1"></a-text>  
    </a-entity>

  </a-scene>

  <script>
    const sky = document.querySelector('a-sky')
    const eye1 = document.getElementById('eye1')
    const eye2 = document.getElementById('eye2')

    var top_arrow = document.getElementById('top_arrow');
    var bottom_arrow = document.getElementById('bottom_arrow');
    var exit_arrow = document.getElementById('exit_arrow');

    var hotspot1 = document.getElementById('hotspot1');
    var hotspot1_value = 0;

    var info_tab = document.getElementById('info_tab')
    var close_button = document.getElementById('close_button');

    var info_obj_name = document.getElementById('info_obj_name');
    var info_obj_othername = document.getElementById('info_obj_othername');
    var info_obj_material = document.getElementById('info_obj_material');
    var info_obj_description = document.getElementById('info_obj_description');
    var info_obj_picture = document.getElementById('info_obj_picture');


    let left_location = right_location = top_location = bottom_location = '';
    let eye1_location = eye2_location = 0;
    
    let eye1_value = eye2_value = 0;
    let top_arrow_value = bottom_arrow_value = 0;
    
    top_arrow.addEventListener('click', () => handleDirectionClick(top_location));
    bottom_arrow.addEventListener('click', () => handleDirectionClick(bottom_location));
    
    eye1.addEventListener('click', () => handleDirectionClick(eye1_location));
    eye2.addEventListener('click', () => handleDirectionClick(eye2_location));

    hotspot1.addEventListener('click',()=>{
      info_tab.setAttribute('visible','true')
      hotspot1.setAttribute('visible','false')
    })

    close_button.addEventListener('click',()=>{
      info_tab.setAttribute('visible','false')
      hotspot1.setAttribute('visible','true')
    })

    const functions = {
      scene1: function() {
        sky.setAttribute('src','./images/vr_images/1.png');
        top_arrow.setAttribute('position','5 0 0.5')
        top_arrow.setAttribute('rotation','-90 0 0')
        bottom_arrow.setAttribute('rotation','-90 180 0')
        
        eye1_location='';
        eye2_location='';
        eye1_value = eye2_value = 0;
        top_arrow_value = 1;
        bottom_arrow_value = 0;
        top_location='scene2';
        bottom_location='';

        info_obj_name.setAttribute('value','Decorative Terracotta Elephant');
        info_obj_othername.setAttribute('value','- Auspicious Guardian Figure');
        info_obj_material.setAttribute('value','- Handcrafted terracotta');
        info_obj_description.setAttribute('value','- An auspicious entrance figure \n symbolizing strength, protection, \n and prosperity.');
        info_obj_picture.setAttribute('src','./images/objects/scene2_1.JPG')

        hotspot1_value = 1;
        nav_icon_updater();
      },
      scene2: function(){
        sky.setAttribute('src','./images/vr_images/2.png');
        
        top_arrow.setAttribute('position','6 0 -2')
        top_arrow.setAttribute('rotation','-90 0 0')
        bottom_arrow.setAttribute('position','-7 -1 0')
        bottom_arrow.setAttribute('rotation','-90 180 0')

        eye1.setAttribute('position','8 6 -10')
        eye2.setAttribute('position','10 6 7')
        eye1.setAttribute('rotation','0 -50 0')
        eye2.setAttribute('rotation','0 -120 0')
        
        
        top_location ='scene3'
        bottom_location='scene1'

        eye1_location='scene4';
        eye2_location='scene5';
        eye1_value = eye2_value = 1;
        top_arrow_value = 1;
        bottom_arrow_value= 1;
        
        nav_icon_updater();
      },

      scene3: function(){
        sky.setAttribute('src','./images/vr_images/3.png');
        top_arrow.setAttribute('position','6 0 0')
        top_arrow.setAttribute('rotation','-90 0 0')
        bottom_arrow.setAttribute('position','-5 -2 -0.5')
        bottom_arrow.setAttribute('rotation','-90 180 0')
        
        eye1.setAttribute('position','5 5 -9')
        eye2.setAttribute('position','5 5 9')
        eye1.setAttribute('rotation','0 -50 0')
        eye2.setAttribute('rotation','0 -150 0')

        bottom_location='scene2'
        top_location ='scene6'

        eye1_location='scene4';
        eye2_location='scene5';
        eye1_value = eye2_value = 1;
        top_arrow_value = 1;
        bottom_arrow_value= 1;
        
        nav_icon_updater();
      },

      scene4: function(){
        sky.setAttribute('src','./images/vr_images/4.png');

        bottom_arrow.setAttribute('position','-5 1 -2')
        bottom_arrow.setAttribute('rotation','0 70 -90')

        bottom_location = 'scene3'

        eye1_location='';
        eye2_location='';
        eye1_value = eye2_value = 0;
        top_arrow_value = 0;
        bottom_arrow_value= 1;
        nav_icon_updater();
      },

      scene5: function(){
        sky.setAttribute('src','./images/vr_images/5.jpg');

        bottom_arrow.setAttribute('position','4 1 0')
        bottom_arrow.setAttribute('rotation','0 -90 -90')

        bottom_location = 'scene3'

        eye1_location='';
        eye2_location='';
        eye1_value = eye2_value = 0;
        top_arrow_value = 0;
        bottom_arrow_value= 1;

        nav_icon_updater();
      },

     scene6: function(){
        sky.setAttribute('src','./images/vr_images/6.png');
        top_arrow.setAttribute('position','6 0 -1')
        top_arrow.setAttribute('rotation','-90 0 0')
        bottom_arrow.setAttribute('position','-6 0 -1')
        bottom_arrow.setAttribute('rotation','-90 180 0')
        
        eye1.setAttribute('position','0 3.5 -7')
        eye2.setAttribute('position','0 3.5 7')
        eye1.setAttribute('rotation','0 0 0')
        eye2.setAttribute('rotation','0 -180 0')

        bottom_location='scene3'
        top_location ='scene9'

        eye1_location='scene7';
        eye2_location='scene8';
        eye1_value = eye2_value = 1;
        top_arrow_value = 1;
        bottom_arrow_value= 1;
        
        nav_icon_updater();
      },

      scene7: function(){
        sky.setAttribute('src','./images/vr_images/7.jpg');

        bottom_arrow.setAttribute('position','-7 2 0.2')
        bottom_arrow.setAttribute('rotation','0 90 90')

        bottom_location = 'scene6'

        eye1_location='';
        eye2_location='';
        eye1_value = eye2_value = 0;
        top_arrow_value = 0;
        bottom_arrow_value= 1;
        nav_icon_updater();
      },

      scene8: function(){
        sky.setAttribute('src','./images/vr_images/real_8.png');

        bottom_arrow.setAttribute('position','-4 2 8')
        bottom_arrow.setAttribute('rotation','0 150 90')

        bottom_location = 'scene6'

        eye1_location='';
        eye2_location='';
        eye1_value = eye2_value = 0;
        top_arrow_value = 0;
        bottom_arrow_value= 1;
        nav_icon_updater();
      },
      
      scene9: function(){
        sky.setAttribute('src','./images/vr_images/8.png');

        top_arrow.setAttribute('position','8 2 -0.5')
        top_arrow.setAttribute('rotation','0 -90 90')
        bottom_arrow.setAttribute('position','-7 0 -0.5')
        bottom_arrow.setAttribute('rotation','-90 180 0')
        
        eye1.setAttribute('position','-4 3.5 -5')
        eye1.setAttribute('rotation','0 45 0')

        bottom_location='scene6'
        top_location ='scene11'

        eye1_location='scene10';
        eye2_location='';
        eye2_value = 0;
        eye1_value = 1;
        top_arrow_value = 1;
        bottom_arrow_value= 1;
        
        nav_icon_updater();
      },

      scene10: function(){
        sky.setAttribute('src','./images/vr_images/9.jpg');

        bottom_arrow.setAttribute('position','8 1 2')
        bottom_arrow.setAttribute('rotation','0 -90 -90')

        bottom_location = 'scene9'

        eye1_location='';
        eye2_location='';
        eye1_value = eye2_value = 0;
        top_arrow_value = 0;
        bottom_arrow_value= 1;
        nav_icon_updater();
      },

      scene11: function(){
        sky.setAttribute('src','./images/vr_images/13.png');

        top_arrow.setAttribute('position','4 1 -0.5')
        top_arrow.setAttribute('rotation','-90 0 0')
        bottom_arrow.setAttribute('position','-7 2 0.7')
        bottom_arrow.setAttribute('rotation','0 90 90')

        bottom_location='scene9'
        top_location ='scene12'

        eye1_location='';
        eye2_location='';
    
        eye1_value = eye2_value= 0;
 
        top_arrow_value = bottom_arrow_value= 1;
        
        nav_icon_updater();
      },

      scene12: function(){
        sky.setAttribute('src','./images/vr_images/10.png');

        top_arrow.setAttribute('position','5 1 -0.5')
        top_arrow.setAttribute('rotation','-90 0 0')
        bottom_arrow.setAttribute('position','-5 1 -0.5')
        bottom_arrow.setAttribute('rotation','-90 180 0')
        
        eye1.setAttribute('position','-1 3.5 -5')
        eye1.setAttribute('rotation','0 0 0')

        bottom_location='scene11'
        top_location ='scene14'

        eye1_location='scene13';
        eye2_location='';
        
        eye1_value = 1;
        eye2_value= 0;
 
        top_arrow_value = bottom_arrow_value= 1;
        exit_arrow.setAttribute('position','6 100 0')
        exit_arrow.setAttribute('visible','false')
        
        nav_icon_updater();
      },

      scene13: function(){
        sky.setAttribute('src','./images/vr_images/11.jpg');

        top_arrow.setAttribute('position','8 3 -0.5')
        top_arrow.setAttribute('rotation','0 -90 90')
        

        bottom_location=''
        top_location ='scene12'

        eye1_location='';
        eye2_location='';
        
        eye1_value = eye2_value= 0;
 
        top_arrow_value = 1;
        bottom_arrow_value= 0;
        
        nav_icon_updater();
      },

      scene14: function(){
        sky.setAttribute('src','./images/vr_images/12.png');

        bottom_arrow.setAttribute('position','-8 3 1')
        bottom_arrow.setAttribute('rotation','0 90 90')
        
        eye1.setAttribute('position','-1 3.5 -5')
        eye1.setAttribute('rotation','0 0 0')

        bottom_location='scene12'
        top_location =''

        eye1_location='';
        eye2_location='';
        
        eye1_value = 0;
        eye2_value= 0;
 
        top_arrow_value = 0;
        bottom_arrow_value= 1;
        
        exit_arrow.setAttribute('position','6 2 0')
        exit_arrow.setAttribute('visible','true')
        nav_icon_updater();
      }


    }

    function nav_icon_updater(){
      top_arrow.setAttribute('visible',top_arrow_value !== 0)
      bottom_arrow.setAttribute('visible',bottom_arrow_value !== 0)
      eye1.setAttribute('visible',eye1_value !== 0)
      eye2.setAttribute('visible',eye2_value !== 0)
      hotspot1.setAttribute('visible',hotspot1_value != 0)
    }

    function handleDirectionClick(location) {
      if (location && functions[location]) {
        functions[location]();
      }
    }

    exit_arrow.addEventListener('click',()=>{
      console.log('exit')
    })

    /*Default Scene*/
    functions.scene2();
  </script>
    <script>
    const startVrButton = document.getElementById('start_vr');
    const aScene = document.querySelector('a-scene');
    const mainContainer = document.getElementById('main_container');

    startVrButton.addEventListener('click', enterVRMode);

    function enterVRMode() {
    mainContainer.style.display = 'none';
    
    aScene.setAttribute('visible', 'true');
    
    if (aScene.enterVR) {
        aScene.enterVR();
    }
    }
  </script>
</body>
</html>